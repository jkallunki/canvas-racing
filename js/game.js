// Generated by CoffeeScript 1.3.3
(function(){var e,t,n,r,i,s,o,u;window.requestAnimFrame=function(e){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}();r={37:"left",38:"up",39:"right",40:"down"};n={left:!1,up:!1,right:!1,down:!1};e={x:320,y:410,rotation:0,speed:0,img:null};e.img=new Image;e.img.src="img/car.png";t=null;i=null;s=function(e,t,n,r){i.save();i.translate(t,n);i.rotate(r);i.drawImage(e,-(e.width/2),-(e.height/2));return i.restore()};u=function(){n.up?e.speed<6&&(e.speed+=.1):n.down?e.speed>-3&&(e.speed-=.1):e.speed>0?e.speed-=.1:e.speed+=.1;n.right&&(e.rotation+=e.speed/90);n.left&&(e.rotation-=e.speed/90);e.y+=Math.sin(e.rotation)*e.speed;e.x+=Math.cos(e.rotation)*e.speed;i.clearRect(0,0,640,480);s(e.img,e.x,e.y,e.rotation);return requestAnimFrame(function(){return u(t,i)})};o=function(){t=document.getElementById("game-canvas");i=t.getContext("2d");return u()};$(document).ready(function(){o();return $(window).bind("keydown keyup",function(e){if(r.hasOwnProperty(e.keyCode))return n[r[e.keyCode]]=e.type==="keydown"})})}).call(this);